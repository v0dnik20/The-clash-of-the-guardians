#include <stdio.h>
#include <string.h>

struct guardian
{
    char nombreguardian[50];
    char tipo[50];
    int pv;
    int pa;
    int pd;
};

struct player
{
    char nombreplayer[50];
    int puntosdevida;
};

int main()
{
    //guardianes
    FILE *txtguardian;
    txtguardian = fopen("txtguardian.txt", "r");
    if (txtguardian == NULL)
    {
        printf("Error al abrir el archivo ''guardian.txt''\n");
        system("pause");
        return 1;
    }
    struct guardian guardianes[60];
    int records = 0;
    while (fscanf(txtguardian, "%50[^,],%50[^,],%d,%d,%d\n",
                  guardianes[records].nombreguardian,
                  guardianes[records].tipo,
                  &guardianes[records].pv,
                  &guardianes[records].pa,
                  &guardianes[records].pd) == 5)      
    {
        records++;
    }
    fclose(txtguardian);
    int i;
    //imprime las cartas del archivo
    /*for (i = 0; i < records; i++)
    {
        printf("nombre: %s ", guardianes[i].nombreguardian);
        printf("tipo: %s ", guardianes[i].tipo);
        printf("PV: %d ", guardianes[i].pv);
        printf("PA: %d ", guardianes[i].pa);
        printf("PD: %d\n", guardianes[i].pd);

    }*/ 
    
    //jugadores (player y cpu)
    FILE*txtplayers;
    txtplayers = fopen("txtplayers.txt", "r");
    if (txtplayers == NULL)
    {
        printf("Error al abrir el archivo ''players.txt''\n");
        system("pause");
        return 1;
    }
    struct player players[2];
    int cplayers = 0;
    while (fscanf(txtplayers, "%50[^,],%d\n",
                  players[cplayers].nombreplayer,
                  &players[cplayers].puntosdevida) == 2)      
    {
        cplayers++;
    }
    
    fclose(txtplayers);
    int iplayers;
    
    //  MENU
    int menuseleccion;
    do {
        printf("BIENVENIDO A EL JUEGO THE CLASH OF THE GUARDIANS\n\n");
        printf("Para mostrar los jugadores, digite 1.\n");
        printf("Para mostrar los guardianes, digite 2.\n");
        printf("Para salir, digite 0.\n");
        scanf("%d", &menuseleccion);
        system("cls"); // Borra la pantalla en sistemas Windows, para sistemas Unix/Linux, usa "clear"

        switch (menuseleccion) {
            case 1:
                // Imprime los players del archivo
                printf("PLAYERS:\n");
                for (iplayers = 0; iplayers < cplayers; iplayers++)
                  {
                     printf("Nombre player%d: %s \n",iplayers, players[iplayers].nombreplayer);
                     printf("Vida player%d: %d\n\n",iplayers, players[iplayers].puntosdevida);
                  }
                system("pause");
                system("cls");
                break;
            case 2:
                // Imprime las cartas del archivo
                for (i = 0; i < records; i++)
                {
                     printf("nombre: %s ", guardianes[i].nombreguardian);
                     printf("tipo: %s ", guardianes[i].tipo);
                     printf("PV: %d ", guardianes[i].pv);
                     printf("PA: %d ", guardianes[i].pa);
                     printf("PD: %d\n", guardianes[i].pd);
                }
                system("pause");
                system("cls");
                break;
            case 0:
                printf("Â¡Hasta luego!\n");
                break;
            default:
                printf("Opcion invalida. Por favor, ingrese 1, 2 o 0.\n");
                system("pause");
                system("cls");
        }
    } while (menuseleccion != 0);

    system("pause");
    return 0;
}
